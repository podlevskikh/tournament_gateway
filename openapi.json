{
  "openapi": "3.0.0",
  "info": {
    "description": "Tournament API",
    "title": "Tournament API",
    "version": "1.0"
  },
  "paths": {
    "/api/tournaments": {
      "get": {
        "security": [],
        "operationId": "listTournaments",
        "tags": [
          "tournaments"
        ],
        "description": "Get a list of all tournaments",
        "responses": {
          "200": {
            "description": "tournaments list ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TournamentsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/seasons": {
      "get": {
        "operationId": "getSeasons",
        "tags": [
          "seasons"
        ],
        "description": "get seasons",
        "responses": {
          "200": {
            "description": "seasons list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SeasonsResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/api/seasons/{season_alias}/stages": {
      "parameters": [
        {
          "$ref": "#/components/parameters/SeasonAlias"
        }
      ],
      "get": {
        "operationId": "getSeasonsStages",
        "tags": [
          "seasons"
        ],
        "description": "get season stages",
        "responses": {
          "200": {
            "description": "season stages list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SeasonStagesResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "description": "season not found",
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/leagues/{tournament_alias}/{season_alias}/{stage_alias}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/TournamentAlias"
        },
        {
          "$ref": "#/components/parameters/SeasonAlias"
        },
        {
          "$ref": "#/components/parameters/StageAlias"
        }
      ],
      "get": {
        "operationId": "getLeagues",
        "tags": [
          "leagues"
        ],
        "description": "get tournament season stage leagues",
        "responses": {
          "200": {
            "description": "league list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LeaguesResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "description": "Tournament or season or stage not found",
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/groups/{tournament_alias}/{season_alias}/{stage_alias}/{league_alias}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/TournamentAlias"
        },
        {
          "$ref": "#/components/parameters/SeasonAlias"
        },
        {
          "$ref": "#/components/parameters/StageAlias"
        },
        {
          "$ref": "#/components/parameters/LeagueAlias"
        }
      ],
      "get": {
        "operationId": "getGroups",
        "tags": [
          "groups"
        ],
        "description": "get tournament season stage leagues",
        "responses": {
          "200": {
            "description": "league list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupsResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "description": "Tournament or season or stage not found",
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/groups/{group_alias}/matches": {
      "parameters": [
        {
          "$ref": "#/components/parameters/GroupAlias"
        }
      ],
      "get": {
        "operationId": "getGroupMatches",
        "tags": [
          "groups"
        ],
        "description": "get group matches",
        "responses": {
          "200": {
            "description": "match list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MatchesResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "description": "Group not found",
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/groups/{group_alias}/teams": {
      "parameters": [
        {
          "$ref": "#/components/parameters/GroupAlias"
        }
      ],
      "get": {
        "operationId": "getGroupTeams",
        "tags": [
          "groups"
        ],
        "description": "get group teams",
        "responses": {
          "200": {
            "description": "team list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TeamsResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "description": "Group not found",
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/teams/{team_id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/TeamId"
        }
      ],
      "get": {
        "operationId": "getTeam",
        "tags": [
          "teams"
        ],
        "description": "get team",
        "responses": {
          "200": {
            "description": "team",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Team"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "description": "Team not found",
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/teams/{team_id}/groups": {
      "parameters": [
        {
          "$ref": "#/components/parameters/TeamId"
        }
      ],
      "get": {
        "operationId": "getTeamGroups",
        "tags": [
          "teams"
        ],
        "description": "get team groups",
        "responses": {
          "200": {
            "description": "team groups",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupsResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "description": "Team not found",
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/teams/{team_id}/groups/{group_alias}/players": {
      "parameters": [
        {
          "$ref": "#/components/parameters/TeamId"
        },
        {
          "$ref": "#/components/parameters/GroupAlias"
        }
      ],
      "get": {
        "operationId": "getTeamGroupPlayers",
        "tags": [
          "teams"
        ],
        "description": "get team group players",
        "responses": {
          "200": {
            "description": "team group players",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlayersResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "description": "Team or group not found",
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/matches/{match_id}/result": {
      "parameters": [
        {
          "$ref": "#/components/parameters/MatchId"
        }
      ],
      "get": {
        "operationId": "getMatchResult",
        "tags": [
          "matches"
        ],
        "description": "get match result",
        "responses": {
          "200": {
            "description": "matchResult",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MatchResult"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "description": "match not found",
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "example": "tournament_not_found"
          },
          "message": {
            "type": "string",
            "example": "tournament not found"
          }
        }
      },
      "Tournament": {
        "type": "object",
        "properties": {
          "alias": {
            "type": "string",
            "example": "male"
          },
          "name": {
            "type": "string",
            "example": "Мужской турнир"
          },
          "description": {
            "type": "string",
            "example": "Регулярный мужской турнир без возрастных ограничений"
          },
          "gender": {
            "type": "string",
            "enum": [
              "male",
              "female",
              "mixed"
            ]
          }
        }
      },
      "Season": {
        "type": "object",
        "properties": {
          "alias": {
            "type": "string",
            "example": "2021-2022"
          },
          "name": {
            "type": "string",
            "example": "Сезон 2021-2022"
          },
          "dateStart": {
            "type": "string",
            "example": "2020-04-01"
          },
          "dateFinish": {
            "type": "string",
            "example": "2020-04-01"
          },
          "isCurrent": {
            "type": "boolean",
            "example": true
          }
        }
      },
      "Stage": {
        "type": "object",
        "properties": {
          "alias": {
            "type": "string",
            "example": "2021-2022_second_group_round"
          },
          "name": {
            "type": "string",
            "example": "Круг 2"
          },
          "dateStart": {
            "type": "string",
            "example": "2020-04-01"
          },
          "dateFinish": {
            "type": "string",
            "example": "2020-04-01"
          },
          "isCurrent": {
            "type": "boolean",
            "example": true
          },
          "iconUrl": {
            "type": "string",
            "example": "http://volleymsk.ru/images/round_icons/2021-2022_group_round_2"
          },
          "seasonAlias": {
            "type": "string",
            "example": "2022-2022"
          },
          "type": {
            "type": "string",
            "enum": [
              "qualification",
              "groups",
              "joint",
              "playOff",
              "finalFour"
            ]
          }
        }
      },
      "League": {
        "type": "object",
        "properties": {
          "alias": {
            "type": "string",
            "example": "male_2021-2022_second_group_round_first_league"
          },
          "name": {
            "type": "string",
            "example": "Первая лига"
          },
          "strengthWeight": {
            "type": "integer",
            "example": 3
          },
          "tournamentAlias": {
            "type": "string",
            "example": "male"
          },
          "seasonAlias": {
            "type": "string",
            "example": "2022-2022"
          },
          "stageAlias": {
            "type": "string",
            "example": "2021-2022_second_group_round"
          }
        }
      },
      "Group": {
        "type": "object",
        "properties": {
          "alias": {
            "type": "string",
            "example": "male_2021-2022_second_group_round_first_league_group_A"
          },
          "shortName": {
            "type": "string",
            "example": "А"
          },
          "name": {
            "type": "string",
            "example": "Группа А"
          },
          "description": {
            "type": "string",
            "example": "Мужской турнир, сезон 2021-2022, Первая лига, Круг 2, Группа А"
          },
          "tournamentAlias": {
            "type": "string",
            "example": "male"
          },
          "seasonAlias": {
            "type": "string",
            "example": "2021-2022"
          },
          "stageAlias": {
            "type": "string",
            "example": "2021-2022_second_group_round"
          },
          "leagueAlias": {
            "type": "string",
            "example": "male_2021-2022_second_group_round_first_league"
          }
        }
      },
      "Match": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1234
          },
          "date": {
            "type": "string",
            "example": "2022-02-02"
          },
          "homeTeamId": {
            "type": "integer",
            "example": 123
          },
          "guestTeamId": {
            "type": "integer",
            "example": 321
          },
          "result": {
            "$ref": "#/components/schemas/MatchResult",
            "nullable": true
          }
        }
      },
      "Team": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 123
          },
          "name": {
            "type": "string",
            "example": "Буревестник"
          },
          "description": {
            "type": "string",
            "example": "Выпускники МГУ"
          },
          "foundationDate": {
            "type": "string",
            "example": "2006-10-01"
          },
          "contactUser": {
            "$ref": "#/components/schemas/User"
          },
          "homeGyms": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Gym"
            }
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 12345
          },
          "firstName": {
            "type": "string",
            "example": "Абрамов"
          },
          "lastName": {
            "type": "string",
            "example": "Петр"
          },
          "middleName": {
            "type": "string",
            "example": "Николаевич"
          },
          "nickName": {
            "type": "string",
            "example": "albert"
          },
          "email": {
            "type": "string",
            "example": "player@volley.msk"
          },
          "phone": {
            "type": "string",
            "example": "+7(999)000-11-22"
          }
        }
      },
      "Gym": {
        "type": "object",
        "properties": {
          "place": {
            "$ref": "#/components/schemas/Place"
          },
          "weekDay": {
            "type": "integer",
            "enum": [
              1,
              2,
              3,
              4,
              5,
              6,
              7
            ]
          },
          "timeFrom": {
            "type": "string",
            "example": "18:00"
          },
          "timeTo": {
            "type": "string",
            "example": "20:00"
          },
          "timeWarmUp": {
            "type": "string",
            "example": "18:00"
          }
        }
      },
      "Place": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 4312
          },
          "metroStation": {
            "type": "string",
            "example": "Бибирево, Арбатская, Давыдково"
          },
          "address": {
            "type": "string",
            "example": "Москва, ул. Академика Королева, дом 1"
          }
        }
      },
      "Player": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 12345
          },
          "firstName": {
            "type": "string",
            "example": "Казаков"
          },
          "lastName": {
            "type": "string",
            "example": "Александр"
          },
          "middleName": {
            "type": "string",
            "example": "Викторович"
          },
          "birthDate": {
            "type": "string",
            "example": "1987-10-20"
          },
          "gender": {
            "type": "string",
            "enum": [
              "male",
              "female"
            ]
          },
          "skill": {
            "type": "string",
            "example": "МСМК"
          },
          "avatarUrl": {
            "type": "string",
            "example": "http:/volleymsk.ru/images/player_avatars/12345.jpg"
          }
        }
      },
      "MatchResult": {
        "type": "object",
        "properties": {
          "matchId": {
            "type": "integer",
            "example": 54231
          },
          "matchDatetime": {
            "type": "string",
            "example": "2022-01-02T19:00:00"
          },
          "homeTeamId": {
            "type": "integer",
            "example": 123
          },
          "guestTeamId": {
            "type": "integer",
            "example": 321
          },
          "winner": {
            "type": "string",
            "enum": [
              "home",
              "guest"
            ]
          },
          "homePoints": {
            "type": "integer",
            "example": 2
          },
          "guestPoints": {
            "type": "integer",
            "example": 1
          },
          "setResults": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SetResult"
            }
          },
          "homeTeamPlayers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Player"
            }
          },
          "guestTeamPlayers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Player"
            }
          },
          "homeBestPlayerId": {
            "type": "integer",
            "example": 45321
          },
          "guestBestPlayerId": {
            "type": "integer",
            "example": 12345
          },
          "referee": {
            "$ref": "#/components/schemas/Referee"
          },
          "homeRefereeEvaluation": {
            "type": "integer",
            "example": 4
          },
          "guestRefereeEvaluation": {
            "type": "integer",
            "example": 0
          }
        }
      },
      "SetResult": {
        "type": "object",
        "properties": {
          "setNumber": {
            "type": "integer",
            "example": 1
          },
          "homeScore": {
            "type": "integer",
            "example": 25
          },
          "guestScore": {
            "type": "integer",
            "example": 20
          }
        }
      },
      "Referee": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 123
          },
          "firstName": {
            "type": "string",
            "example": "Цигулев"
          },
          "lastName": {
            "type": "string",
            "example": "Иван"
          },
          "middleName": {
            "type": "string",
            "example": "Иванович"
          },
          "phone": {
            "type": "string",
            "example": "+7(917)112-34-45"
          },
          "skill": {
            "type": "string",
            "example": "Судья международной категории"
          },
          "description": {
            "type": "string",
            "example": "любые дни и районы"
          },
          "price": {
            "type": "string",
            "example": "1000-1400р, в зависимости от района"
          }
        }
      },
      "TournamentsResponse": {
        "type": "object",
        "properties": {
          "tournaments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Tournament"
            }
          }
        }
      },
      "SeasonsResponse": {
        "type": "object",
        "properties": {
          "seasons": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Season"
            }
          }
        }
      },
      "SeasonStagesResponse": {
        "type": "object",
        "properties": {
          "stages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Stage"
            }
          }
        }
      },
      "LeaguesResponse": {
        "type": "object",
        "properties": {
          "leagues": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/League"
            }
          }
        }
      },
      "GroupsResponse": {
        "type": "object",
        "properties": {
          "groups": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Group"
            }
          }
        }
      },
      "MatchesResponse": {
        "type": "object",
        "properties": {
          "matches": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Match"
            }
          }
        }
      },
      "TeamsResponse": {
        "type": "object",
        "properties": {
          "teams": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Team"
            }
          }
        }
      },
      "PlayersResponse": {
        "type": "object",
        "properties": {
          "players": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Player"
            }
          }
        }
      }
    },
    "parameters": {
      "TournamentAlias": {
        "name": "tournament_alias",
        "in": "path",
        "description": "tournament alias",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "SeasonAlias": {
        "name": "season_alias",
        "in": "path",
        "description": "season alias",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "StageAlias": {
        "name": "stage_alias",
        "in": "path",
        "description": "stage alias",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "LeagueAlias": {
        "name": "league_alias",
        "in": "path",
        "description": "league alias",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "GroupAlias": {
        "name": "group_alias",
        "in": "path",
        "description": "group alias",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "TeamId": {
        "name": "team_id",
        "in": "path",
        "description": "team id",
        "required": true,
        "schema": {
          "type": "integer"
        }
      },
      "MatchId": {
        "name": "match_id",
        "in": "path",
        "description": "match id",
        "required": true,
        "schema": {
          "type": "integer"
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Bad request",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "NotFound": {
        "description": "Identity not found",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "AlreadyAuthenticated": {
        "description": "Already Authenticated",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  }
}
